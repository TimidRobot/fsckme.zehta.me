{%- macro render_blog_post(post, from_index=false) %}
  <div class="blog-post">
  {%- if from_index %}
    <h2><a href="{{ post|url }}">{{ post.title }}</a></h2>
  {%- else %}
    <h2>{{ post.title }}</h2>
  {%- endif %}
  <p class="meta">
    written by
    {%- if post.twitter_handle %}
      <a href="https://twitter.com/{{ post.twitter_handle
        }}">{{ post.author or post.twitter_handle }}</a>
    {%- else %}
      {{ post.author }}
    {%- endif %}
    on {{ post.pub_date }}
  </p>
  {%- if not from_index %}
  {{ post.body }}
  {%- if post.tags %}
  <div>
    <h3>Tags:</h3>
    <ul>
    {%- for specified_tag in post.tags %}
    {%- set tag = site.get("/tags/{}".format(specified_tag)) %}
    <li><a href="/tags/{{ tag._id }}/">{{ tag.name if tag.name else tag._id.title() }}</a></li>
    {%- endfor %}
    </ul>
  </div>
  {%- endif %}
  {%- endif %}
  </div>
{%- endmacro %}
