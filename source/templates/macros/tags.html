{#- vim: sts=2 sw=2 ts=2 sr et: #}
{%- macro render_post_list(posts) %}
<ol>
  {%- for post in posts %}
  <li>{{ post.pub_date.strftime("%Y-%m-%d") }}: <a href="{{ post|url }}">
      {{- post.title }}</a></li>
  {%- endfor %}
</ol>
{%- endmacro %}


{%- macro render_cat_nav(active=none) %}
<h2><i class="fas fa-tags"></i> Tags</h2>
<div>
<ul>
  {%- for tag in site.query("/tags") %}
    {%- set name = tag.name if tag.name else tag._id.title() %}
    {%- set name = name.replace(" ", "\u00A0") %}
  <li><a href="{{ tag|url }}"><i class="fas fa-tag"></i> {{ name }}</a>
        ({{ tag.children.count() }})</li>
  {%- endfor %}
</ul>
</div>
{%- endmacro %}


{%- macro render_cats_horizontal(year, tags) %}
  {%- if tags %}
    {%- set tags_filtered = [] %}
    {%- for tag in tags|sort %}
      {%- if tag != year %}
        {%- set _ =  tags_filtered.append(tag) %}
      {%- endif %}
    {%- endfor %}
    {% if tags_filtered %}
      {%- for specified_tag in tags_filtered %}
        {%- if loop.first %}
          {{- "(" }}
        {%- endif %}
        {%- set tag = site.get("/tags/{}".format(specified_tag)) %}
        {%- set name = tag.name if tag.name else tag._id.title() %}
        {%- set name = name.replace(" ", "\u00A0") %}
        {{- "" }}<a href="{{ tag|url }}">{{- name }}</a>
        {%- if loop.last %}
          {{- ")" }}
        {%- else %}
          {{- ", " }}
        {%- endif -%}
      {%- endfor -%}
    {%- endif %}
  {%- endif %}
{%- endmacro %}


{%- macro render_cats_vertical(tags) %}
  <div>
    <h3>Tags</h3>
    <ul>
  {%- for specified_tag in tags|sort %}
    {%- set tag = site.get("/tags/{}".format(specified_tag)) %}
    {%- set name = tag.name if tag.name else tag._id.title() %}
    {%- set name = name.replace(" ", "\u00A0") %}
    <li><a href="/tags/{{ tag._id }}/"><i class="fas fa-tag"></i>
        {{ name }}</a></li>
  {%- endfor %}
    <li><a href="{{ "/tags"|url }}"><i class="fas fa-tags"></i>
        All Tags</a></li>
    </ul>
    </ul>
  </div>
{%- endmacro %}
