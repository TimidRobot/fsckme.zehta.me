<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="default-src 'self'; connect-src 'self' stats.zehta.me; font-src 'self' cdnjs.cloudflare.com; img-src 'self' licensebuttons.net www.gravatar.com; script-src 'self' stats.zehta.me; style-src 'self' cdnjs.cloudflare.com;" http-equiv="Content-Security-Policy"/><title>Abandoning SaltStack? - Timid Robot</title><meta content="Timid Robot Zehta" name="author"/><link href="/static/layout.css" integrity="sha512-rorP8qAZ973h10zwAm48StvvcfOMbJk7XQM0pOxxOsn73evY/105dw5e4GlE99VdrX0j6MTtVlR1bpCfmbNlsg==" rel="stylesheet"/><link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" integrity="sha512-8Vtie9oRR62i7vkmVUISvuwOeipGv8Jd+Sur/ORKDD5JiLgTGeBSkI3ISOhc730VGvA5VVQPwKIKlmi+zMZ71w==" referrerpolicy="no-referrer" rel="stylesheet"/><link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" integrity="sha512-bSncow0ApIhONbz+pNI52n0trz5fMWbgteHsonaPk42JbunIeM9ee+zTYAUP1eLPky5wP0XZ7MSLAPxKkwnlzw==" referrerpolicy="no-referrer" rel="stylesheet"/><link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" integrity="sha512-6/gTF62BJ06BajySRzTm7i8N2ZZ6StspU9uVWDdoBiuuNu5rs1a8VwiJ7skCz2BcvhpipLKfFerXkuzs+npeKA==" referrerpolicy="no-referrer" rel="stylesheet"/><link href="/static/custom.css" integrity="sha512-V0diC6SVwHzkx2+Oov77wxnKa7vo+3r8UQzac/xwfJvUXi9U77UPINfbcDmZcqq9MC/tUHu0HsR764zsCtD0OQ==" rel="stylesheet"/><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"/><meta content="Timid Robot's website" property="og:site_name"/><meta content="https://zehta.me/" property="og:url"/><meta content="Blog" property="og:title"/><meta content="website" property="og:type"/><meta content="https://zehta.me/favicon-590x310.png" property="og:image"/><meta content="590" property="og:image:width"/><meta content="310" property="og:image:height"/><meta content="image/png" property="og:image:type"/><meta content="logo" property="og:image:alt"/></head><body><nav class="container"><div class="row"><div class="three columns title"><a href="/">Timid Robot</a></div><div class="nine columns navi"><div class="navgroup"><div class="linkinactive"><a class="linkinactive" href="/about/"><i class="fas fa-address-card"></i> About</a></div><div class="linkinactive"><a class="linkinactive" href="/resume/"><i class="fas fa-laptop-code"></i> Résumé</a></div></div><div class="navgroup"><div class="linkinactive"><a class="linkinactive" href="/tags/"><i class="fas fa-tags"></i> Tags</a></div><div class="linkactive"><a class="linkactive" href="/"><i class="fas fa-newspaper"></i> Blog</a></div></div></div></div></nav><main class="container page"><div class="row"><div class="blog-post"><h1>Abandoning SaltStack?</h1><div class="meta">2022 Mar 12, Timid Robot Zehta</div><p>I really wanted to use SaltStack to configure my home Linux router. It would be wonderful to manage that infrastructure as code. Unfortunately, it does not seem tenable for me.</p><h2 id="issues-at-home">Issues at Home</h2><h3 id="does-not-support-python-3-8-on-macos">Does not support Python 3.8+ on macOS</h3><p>My goal was to be able to push configurations using <code>salt-ssh</code> from my macOS laptop. SaltStack claims macOS is supported. <a href="https://docs.saltproject.io/en/3004/topics/about_salt_project.html">Salt Project</a> (emphasis added):</p><blockquote><p>Salt is tested and packaged to run on CentOS, Debian, RHEL, Ubuntu, <strong>MacOS</strong>, Windows, and more.</p></blockquote><p>I originally installed SaltStack via homebrew, but had to switch to a Python 3.7 virtual environment due to:</p><ul><li><del><code>2020 Jun 21</code>: <a href="https://github.com/saltstack/salt/issues/57742">[BUG] AttributeError: 'Process' object has no attribute '_args_for_getstate' · Issue #57742 · saltstack/salt</a></del></li><li><del><code>2022 Jan 09</code>: <a href="https://github.com/saltstack/salt/issues/61435">[BUG] salt-ssh fails due to attempting to pickle _thread._local object · Issue #61435 · saltstack/salt</a></del></li></ul><p><strong>Update:</strong> These problems existed between the release of Python 3.8 on <code>2019 Oct 14</code> and the release of Salt version <code>3005</code> on <code>2022 Aug 25</code>.</p><h3 id="cannot-use-gitfs-with-salt-ssh">Cannot use gitfs with salt-ssh</h3><p>With SaltStack appearing to work, I wanted to use SaltStack Formulas. Unfortunately, that option has been unsupported since 2005:</p><ul><li><del><code>2015 May 12</code>: <a href="https://github.com/saltstack/salt/issues/23576">Cannot use gitfs with salt-ssh · Issue #23576 · saltstack/salt</a></del></li></ul><p>I also tried to symlink git submodules in, but I encountered the same error.</p><p><strong>Update:</strong> Maybe I misidentified the problem. The issue above was closed on <code>2022 Mar 14</code> with a comment indicating there are other issues.</p><h3 id="docker-images-unmaintained">Docker images unmaintained</h3><p>I thought I might have fewer issues if I might moved my use case closer to the SaltStack mainstream by using a SaltStack docker image. <del>Unfortunately, no <code>3004</code> docker image was available</del> (note update, below). <a href="https://hub.docker.com/r/saltstack/salt">saltstack/salt - Docker Image | Docker Hub</a>:</p><blockquote><p><strong>Supported tags and respective <code>Dockerfile</code> links</strong></p><ul><li><code>3004rc1</code>, <code>rc</code></li><li><code>3003.3</code>, <code>3003.2</code>, <code>3003.1</code>, <code>3003</code>, <code>latest</code></li></ul></blockquote><p>I realize I could create my own docker image, but I encountered this when my capacity for workarounds was already at its limit.</p><p><strong>Update:</strong> At some point after <code>2022 May 03</code>, the docker image creation pipeline was fixed. The <code>3004</code> image was last pushed on <code>2022 Oct 04</code> (just over 2 years after the release of SaltStack <code>3004</code> on <code>2021 Oct 18</code>).</p><h2 id="issues-at-work">Issues at Work</h2><h3 id="lack-of-open-community">Lack of Open Community</h3><p>In learning and using SaltStack, I've frequently come up against a terrible lack of examples and documentation of SaltStack in use. It seems to be getting worse as the few examples I did find are becoming outdated.</p><p>At work, I've tried to use SaltStack in the open so others can build on my work. I've blogged about it previously (<a href="/tags/saltstack/">SaltStack tag - Timid Robot</a>). So far, engagement has been nonexistent.</p><p>I spent years working with Puppet, which had a much stronger community.</p><h3 id="incomplete-migration-from-python-2-7-to-python-3">Incomplete Migration from Python 2.7 to Python 3</h3><p>I use <code>boto_rds</code> for provisioning:</p><ul><li><code>2022 Jan 31</code>: <a href="https://github.com/saltstack/salt/issues/61555">[BUG] boto_rds.subnet_group_present broken · Issue #61555 · saltstack/salt</a></li></ul><p><strong>Update:</strong> This issue remains open as of <code>2023 Feb 01</code>.</p><h3 id="more-salt-ssh-trouble">More <code>salt-ssh</code> Trouble</h3><p>I use <code>salt-ssh</code> for the initial setup of newly provisioned EC2 instances:</p><ul><li><code>2022 Jan 27</code>: <a href="https://github.com/saltstack/salt/issues/61535">[BUG] salt-ssh requires the distro python package · Issue #61535 · saltstack/salt</a></li></ul><p><strong>Update:</strong> This issue remains open as of <code>2023 Feb 01</code>.</p><h3 id="overwhelming-backlog">Overwhelming Backlog</h3><p>The backlog contains many ancient and higher severity issues that deal with the functionality I am interested in (ex. <code>salt-ssh</code>):</p><ul><li><a href="https://github.com/saltstack/salt/issues?q=is%3Aissue+is%3Aopen+sort%3Acreated-asc">Issues · saltstack/salt</a></li></ul><h2 id="conclusion">Conclusion</h2><p>I really wanted to love SaltStack. I love Python. I love a lot of the design decisions made by SaltStack. It seems like the core use case (avoiding <code>salt-ssh</code>, orchestration, and provisioning) is viable. SaltStack might work very very well for you. I respect the developers (especially the volunteer developers) who are working on a great product. Unfortunately, it doesn't feel like SaltStack will work well for me.</p><p>I expect that next I'll try Ansible at home:</p><ul><li><a href="https://docs.ansible.com/ansible_community.html">Ansible Community Documentation</a></li></ul><h2 id="response">Response</h2><p><code>2022 Mar 16</code>: Gareth J. Greenaway provided <a href="https://twitter.com/garethgreenaway/status/1504121699372974082?s=20&amp;t=2sVPB8iytlNVglrK3Lnl5Q">a good response</a> to this post on Twitter.</p><h2 id="ansible-success">Ansible Success</h2><p><code>2022 May 03</code>: Not long after writing this post, my firewall's RAM was damaged by a blackout and I had to rebuild it. I was able to do fairly quickly, even though I was learning Ansible at the same time. So far, I've really enjoyed Ansible. My only complaint is that it is slow (though fast enough for my needs).</p><h2 id="updates">Updates</h2><ul><li><code>2023 Feb 01</code>:<ul><li>Added update notes throughout</li><li>Made date formats consistent</li></ul></li><li><code>2022 May 03</code>:<ul><li>Added recheck date to Docker images unmaintained section</li><li>Added Response section</li><li>Added Ansible Success section</li></ul></li></ul><div><h2>Tags</h2><ul><li><a href="/tags/2022//"><i class="fas fa-tag"></i> 2022</a></li><li><a href="/tags/saltstack//"><i class="fas fa-tag"></i> SaltStack</a></li></ul></div></div><hr class="copyright"/><p class="copyright"><a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license" title="CC BY-SA 4.0 (license button)"><img alt="CC BY-SA 4.0 license button" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png#floatleft"/></a> Copyright © 2022 Timid Robot Zehta. This work is licensed under a <strong><a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license" title="Creative Commons Attribution-ShareAlike 4.0 International License">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</strong></p></div></main><nav class="container footer"><div class="post-prev"><a href="/2022/07/emotional-labor-revisited/" title="Previous post: Emotional Labor Revisited"><i class="fas fa-angle-left"></i> Emotional Labor Revisited</a></div><div class="post-next"><a href="/2021/04/unix-room/" title="Next post: Psychological Safety and the Unix Room">Psychological Safety and th... <i class="fas fa-angle-right"></i></a></div></nav><div class="container bottombot"><i class="fas fa-robot"></i></div><div class="none"><a href="https://hachyderm.io/@TimidRobot" rel="me">Mastodon</a></div></body></html>