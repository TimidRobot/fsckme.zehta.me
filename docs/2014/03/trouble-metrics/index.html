<!doctype html>
<meta charset="utf-8">
<link rel="stylesheet" href="../../../static/style.css">
<title>Troubleshooting collectd / statsd / Graphite â€” fsckme</title>
<body>
  <header>
    <h1>fsck me</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li><a href="../../../">Home</a></li>
          <li><a href="../../../about/">About</a></li>
      </ul>
    </nav>
  </header>
  <div class="page">
  
  <div class="blog-post">
    <h2>Troubleshooting collectd / statsd / Graphite</h2>
  <p class="meta">
    written by
      Timid Robot Zehta
    on 2014-03-31 16:09:00
  </p>
  <p>Troubleshooting <a href="http://graphite.readthedocs.org/en/latest/">Graphite</a> can be a bother. Determining where a
problem lies requires verification of the data at all of the points of
communication. The best tool I've found for this is ngrep:</p>
<pre><code class="lang-shell">sudo ngrep -lqd any ping tcp dst port 2003
</code></pre>
<p>The following complex command finds ping metrics submitted over TCP to
Graphite and highlights them using grep:</p>
<pre><code class="lang-shell">match=&#39;ping&#39;; sudo ngrep -lqd any &quot;${match}&quot; tcp dst port 2003 \
    | grep -E --line-buffered --color=tty &quot;${match}&quot;
</code></pre>
<p>Changing the protocol and port allows easy inspection of metrics sent to a
statsd listener, from carbon-aggregator to carbon-cache, etc.</p>
<p>See the man page for more information:</p>
<ul>
<li><a href="http://manpages.ubuntu.com/manpages/precise/en/man8/ngrep.8.html">man 8 ngrep</a></li>
</ul>

  </div>
  </div>
  <footer>
    &copy; Copyright 2019 by Timid Robot Zehta.
  </footer>
</body>
