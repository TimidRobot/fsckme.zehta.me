<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><title>Troubleshooting collectd / statsd / Graphite - Timid Robot</title><meta content="Timid Robot Zehta" name="author"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="/static/normalize.css" rel="stylesheet"/><link href="/static/skeleton.css" rel="stylesheet"/><link href="/static/custom.css" rel="stylesheet"/></head><body><nav class="container"><div class="row"><div class="two columns navi active"><a class="active" href="/">Blog</a></div><div class="two columns navi"><a class="" href="/tags/">Tags</a></div><div class="two columns navi"><a class="" href="/resume/">Résumé</a></div><div class="two columns navi"><a class="" href="/about/">About</a></div><div class="four columns title"><h1>Timid Robot</h1></div></div></nav><div class="container page"><div class="row"><div class="blog-post"><h2>Troubleshooting collectd / statsd / Graphite</h2><p class="meta">2014 Mar 31, Timid Robot Zehta</p><p>Troubleshooting <a href="http://graphite.readthedocs.org/en/latest/">Graphite</a> can be a bother. Determining where a problem lies requires verification of the data at all of the points of communication. The best tool I've found for this is ngrep:</p><pre><code class="lang-shell">sudo ngrep -lqd any ping tcp dst port 2003
</code></pre><p>The following complex command finds ping metrics submitted over TCP to Graphite and highlights them using grep:</p><pre><code class="lang-shell">match='ping'; sudo ngrep -lqd any "${match}" tcp dst port 2003 \
    | grep -E --line-buffered --color=tty "${match}"
</code></pre><p>Changing the protocol and port allows easy inspection of metrics sent to a statsd listener, from carbon-aggregator to carbon-cache, etc.</p><p>See the man page for more information:</p><ul><li><a href="http://manpages.ubuntu.com/manpages/precise/en/man8/ngrep.8.html">man 8 ngrep</a></li></ul><div><h3>Tags:</h3><ul><li><a href="/tags/2014/">2014</a></li><li><a href="/tags/linux/">Linux</a></li><li><a href="/tags/systems-administration/">Systems Administration</a></li><li><a href="/tags/troubleshooting/">Troubleshooting</a></li></ul></div></div><hr class="copyright"/><p class="copyright"><a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license"><img alt="CC BY-SA 4.0 license button" src="https://licensebuttons.net/l/by-sa/4.0/88x31.png"/></a> Copyright © 2014 Timid Robot Zehta . This work is licensed under a <strong><a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license">Creative Commons Attribution-ShareAlike 4.0 International License</a> .</strong></p><div class="pagination"><p class="prev"><a href="/2014/04/empire-dice/">⇠ Star Wars: Edge of the Empire Dice Probabilities</a></p><p class="next"><a href="/2014/03/dungeon-dice/">Dungeon World Dice Probabilities ⇢</a></p></div></div></div></body></html>