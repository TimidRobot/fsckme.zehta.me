<!doctype html>
<meta charset="utf-8">
<link rel="stylesheet" href="../../static/style.css">
<title>Blog â€” fsckme</title>
<body>
  <header>
    <h1>fsckme</h1>
    <nav>
      <ul class="nav navbar-nav">
        <li class="active"><a href="../../">Home</a></li>
        
          <li><a href="../../about/">About</a></li>
        
      </ul>
    </nav>
  </header>
  <div class="page">
    
  
    
  <div class="blog-post">
  
    <h2><a href="../../2012/11/mystery-writes/">Mystery Writes</a></h2>
  
  <p class="meta">
    written by
    
      Timid Robot Zehta
    
    on 2012-11-01 13:28:00
  </p>
  <p>We recently observed constant write activity on our development server, while
watching dstat. With the help of <a href="http://guichaz.free.fr/iotop/"><code>iotop</code></a>, we identified the Apache web
server was the culprit. But why would apache be doing so many writes? That's
not normal behavior (excluding the the logs). We then used auditd to log
writes by apache.</p>
<pre><code class="lang-shell">sudo auditctl -a exit,always -S write -F uid=33
</code></pre>
<p>We also logged opens that were not O_RDONLY:</p>
<pre><code class="lang-shell">sudo auditctl -a exit,always -S open -F uid=33 -F a1&#39;!=0&#39;`
</code></pre>
<p>This resulted in the following rules:</p>
<pre><code class="lang-shell">sudo auditctl -l LIST_RULES: exit,always uid=33 (0x21) syscall=write LIST_RULES: exit,always uid=33 (0x21) a1!=0 syscall=open
</code></pre>
<p>This allowed us to isolate a PHP module that was completely broken (using
<code>aureport</code>).</p>
<h3>Man Pages</h3>
<ul>
<li><a href="http://manpages.ubuntu.com/manpages/lucid/en/man8/auditctl.8.html">man 8 auditctl</a> - a utility to assist controlling the kernel's
audit system</li>
<li><a href="http://manpages.ubuntu.com/manpages/lucid/en/man8/aureport.8.html">man 8 aureport</a> - a tool that produces summary reports of
audit daemon logs</li>
<li><a href="http://manpages.ubuntu.com/manpages/lucid/en/man8/aureport.8.html">man 1 dstat</a> - versatile tool for generating system resource
statistics</li>
<li><a href="http://manpages.ubuntu.com/manpages/lucid/en/man1/iotop.1.html">man 1 iotop</a> - simple top-like I/O monitor</li>
<li><a href="http://manpages.ubuntu.com/manpages/lucid/man2/open.2.html">man 2 open</a> - open and possibly create a file or device</li>
</ul>

  </div>

  
    
  <div class="blog-post">
  
    <h2><a href="../../2012/10/automation-of-nets/">The Automation of Networks of Networks</a></h2>
  
  <p class="meta">
    written by
    
      Timid Robot Zehta
    
    on 2012-10-10 12:58:00
  </p>
  <p>For me, at least, systems administration is a difficult field to define and
talk about--especially succinctly. A couple of excellent blog posts suggest the
following definition for Systems Administration: <strong>the automation of networks
of networks.</strong></p>
<p>Automation:</p>
<blockquote><p>Therefore, SREs spend half their time writing code to eliminate what they do
the other half of their day. When they "automate themselves out of a job" it
is cause for celebration and they get to pick a new project. There are
always more projects.</p>
<p>(<a href="http://everythingsysadmin.com/2012/10/whatschangedsre.html">Everything Sysadmin: Has the job of a Google SRE changed over the
years?</a>)</p>
</blockquote>
<p>Networks of Networks:</p>
<blockquote><p>Findings so far suggest that networks of networks pose risks of catastrophic
danger that can exceed the risks in isolated systems. A seemingly benign
disruption can generate rippling negative effects. Those effects can cost
millions of dollars, or even billions, when stock markets crash, half of
India loses power or an Icelandic volcano spews ash into the sky, shutting
down air travel and overwhelming hotels and rental car companies. In other
cases, failure within a network of networks can mean the difference between
a minor disease outbreak or a pandemic, a foiled terrorist attack or one
that kills thousands of people.</p>
<p>(<a href="http://www.sciencenews.org/view/feature/id/343939/title/When_Networks_Network">When Networks Network - Science News</a> via <a href="http://www.schneier.com/blog/archives/2012/10/the_insecurity_1.html">Schneier on Security:
The Insecurity of Networks</a>)</p>
</blockquote>
<p>The concept of networks of networks also servers to differentiate system administrators from programmers (not 100% accurate, but helpful none-the-less).</p>

  </div>

  
    
  <div class="blog-post">
  
    <h2><a href="../../2012/10/isolating-ssd/">Isolating SSD Firmware Issue</a></h2>
  
  <p class="meta">
    written by
    
      Timid Robot Zehta
    
    on 2012-10-03 16:10:00
  </p>
  <p>On Friday 2012-09-28, my MacBook Pro started freezing. There had been no
significant software updates that morning (though 10.8.2 came out that week).</p>
<p>I didn't want to deal with it, so I took it to the Apple Store. Unfortunately,
they simply wasted a few days (given the solution found, I'm confident they
never let it run more than an hour).</p>
<p>Once I got it back from the Apple Store without resolution, I knew it would be
up to me to isolate the issue. I was inspired by <a href="http://everythingsysadmin.com/2012/09/seniorsysadmins.html">Everything Sysadmin: What
makes a sysadmin a "senior sysadmin"?</a> to proceed methodically.</p>
<p>It paid off:</p>
<blockquote><p>Correct a condition where an incorrect response to a SMART counter will cause
the m4 drive to become unresponsive after 5184 hours [216 days] of Power-on
time. The drive will recover after a power cycle, however, this failure will
repeat once per hour after reaching this point. The condition will allow the
end user to successfully update firmware, and poses no risk to user or system
data stored on the drive.</p>
<p>(<a href="http://forum.crucial.com/t5/Solid-State-Drives-SSD/M4-firmware-0309-is-now-available/td-p/80286">&gt;M4 firmware 0309 is now available - Crucial Community</a>; found
via <a href="http://www.j03l.com/2012/02/mac-freezes-after-hour-crucial-ssd.html">j03l: MAC Freezes After An Hour - Crucial SSD Problem</a>)</p>
</blockquote>
<p>Since the installation of firmware 010G, my MacBook Pro has operated without
issue!</p>
<p>Hopefully, this post will be another signpost for those
affected.</p>
<p>Also, I can't overemphasis this post: <a href="http://everythingsysadmin.com/2012/09/seniorsysadmins.html">Everything Sysadmin: What makes a
sysadmin a "senior sysadmin"?</a></p>

  </div>

  

  
  <div class="pagination">
    
      <a href="../../page/2/">&laquo; Previous</a>
    
    | 3 |
    
      <a href="../../page/4/">Next &raquo;</a>
    
  </div>


  </div>
  <footer>
    &copy; Copyright 2019 by Timid Robot Zehta.
  </footer>
</body>
